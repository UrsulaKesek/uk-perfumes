{"ast":null,"code":"import _defineProperty from\"/Users/ursulakesek/Desktop/Birkbeck finals/UrsulaKesek-module-ii-master/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/ursulakesek/Desktop/Birkbeck finals/UrsulaKesek-module-ii-master/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ursulakesek/Desktop/Birkbeck finals/UrsulaKesek-module-ii-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import\"./Weather.css\";import{Input,Form,SingleWeatherCard}from\"./components\";import{API_KEY}from\"./constants\";function WeatherCard(){var initialState={city:\"\"};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var onChange=function onChange(event){setQuery(_objectSpread({},query,_defineProperty({},event.target.id,event.target.value)));};var onClick=function onClick(event){event.preventDefault();setData(\"\".concat(data.main.temp));};var onSubmit=function onSubmit(event){event.preventDefault();setData(_objectSpread({},data,{city:query.city,loading:true,error:\"\"}));fetch(\"\".concat(window.location.protocol,\"//api.openweathermap.org/data/2.5/weather?q=\").concat(query.city,\"&appid=\").concat(API_KEY,\"&units=\").concat(query.units)).then(function(res){if(!res.ok){setData(_objectSpread({},data,{error:res.statusText,loading:false}));return;}return res.json().then(function(weatherData){setData(_objectSpread({},data,{city:query.city,weatherData:weatherData,loading:false,error:null}));});});};return/*#__PURE__*/React.createElement(\"div\",{className:\"weapp\"},/*#__PURE__*/React.createElement(\"h2\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"stormy\",\"aria-label\":\"weather-app\",role:\"img\"},\"\\u26C8\\uFE0F\"),\"Weather App\",/*#__PURE__*/React.createElement(\"span\",{className:\"stormy1\",\"aria-label\":\"weather-app\",role:\"img\"},\"\\u26C8\\uFE0F\")),/*#__PURE__*/React.createElement(Form,{onSubmit:onSubmit},/*#__PURE__*/React.createElement(Input,{id:\"city\",label:\"Choose City\",onChange:onChange,placeholder:\"Insert the city name here\",type:\"text\",city:query.city}),/*#__PURE__*/React.createElement(\"button\",{className:\"search\",disabled:data.loading||!query.city},data.loading?\"Loading...\":\"Search!\")),data.weatherData&&/*#__PURE__*/React.createElement(SingleWeatherCard,{city:query.city,data:data.weatherData,onClick:onClick}),data.error&&/*#__PURE__*/React.createElement(\"div\",{className:\"lost\"},JSON.stringify(data.error)));}export default WeatherCard;","map":{"version":3,"sources":["/Users/ursulakesek/Desktop/Birkbeck finals/UrsulaKesek-module-ii-master/src/weather/index.jsx"],"names":["React","useState","Input","Form","SingleWeatherCard","API_KEY","WeatherCard","initialState","city","query","setQuery","data","setData","onChange","event","target","id","value","onClick","preventDefault","main","temp","onSubmit","loading","error","fetch","window","location","protocol","units","then","res","ok","statusText","json","weatherData","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport \"./Weather.css\";\nimport { Input, Form, SingleWeatherCard } from \"./components\";\nimport { API_KEY } from \"./constants\";\n  \n\nfunction WeatherCard() {\n  const initialState = {\n    city: \"\",\n  };\n  const [query, setQuery] = useState(initialState);\n  const [data, setData] = useState({});\n\n  const onChange = (event) => {\n    setQuery({ ...query, [event.target.id]: event.target.value });\n  };\n  const onClick = (event) => {\n    event.preventDefault();\n    setData(`${data.main.temp}`);\n  };\n  const onSubmit = (event) => {\n    event.preventDefault();\n    setData({ ...data, city: query.city, loading: true, error:\"\"});\n    fetch(\n      `${window.location.protocol}//api.openweathermap.org/data/2.5/weather?q=${query.city}&appid=${API_KEY}&units=${query.units}`\n    ).then((res) => {\n      if (!res.ok) {\n        setData({ ...data, error: res.statusText, loading: false });\n        return;\n      }\n      return res.json().then((weatherData) => {\n        setData({\n          ...data,\n          city: query.city,\n          weatherData,\n          loading: false,\n          error:null,\n        });\n      });\n    });\n  };\n  return (\n    <div className=\"weapp\">\n      <h2>\n        <span className=\"stormy\" aria-label=\"weather-app\" role=\"img\">\n          ⛈️\n        </span>\n        Weather App\n        <span className=\"stormy1\" aria-label=\"weather-app\" role=\"img\">\n          ⛈️\n        </span>\n      </h2>\n      <Form onSubmit={onSubmit}>\n        <Input\n          id=\"city\"\n          label=\"Choose City\"\n          onChange={onChange}\n          placeholder=\"Insert the city name here\"\n          type=\"text\"\n          city={query.city}\n        />\n        <button className=\"search\" disabled={data.loading || !query.city}>\n          {data.loading ? \"Loading...\" : \"Search!\"}\n        </button>\n      </Form>\n      {data.weatherData && (\n        <SingleWeatherCard\n          city={query.city}\n          data={data.weatherData}\n          onClick={onClick}\n        />\n      )}\n      {data.error && <div className=\"lost\">{JSON.stringify(data.error)}</div>}\n    </div>\n  );\n}\n\nexport default WeatherCard;\n"]},"metadata":{},"sourceType":"module"}